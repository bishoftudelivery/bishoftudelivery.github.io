<!DOCTYPE html>
<html lang="am" data-version="14.0" data-lang="am">
<head>
    <meta name="google-site-verification" content="Yo225u8qpEADrbmyCChQZ9zOZ9pNeUwm1meyq8ChHh4" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title id="page-title">·â¢·àæ·çç·â± ·ã¥·àä·â®·à™ | Bishoftu Delivery</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#ff4500">
    <meta name="description" content="·â¢·àæ·çç·â± ·ãç·àµ·å• ·àù·åç·â• ·àõ·ãµ·à®·àª - Food Delivery Service in Bishoftu">
    <link rel="manifest" href="./manifest.json?v=14">
    
    <!-- iOS Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="BishoftuEats">
    <link rel="apple-touch-icon" href="./icons/icon-152x152.png?v=14">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="./icons/favicon.ico?v=14">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* Tablet-like responsive design */
        :root {
            /* Base font size for tablets (scales down for phones) */
            --base-font-size: 18px;
            --tablet-font-scale: 1;
            --phone-font-scale: 0.85;
            --small-phone-font-scale: 0.75;
            
            /* Responsive spacing */
            --spacing-xs: clamp(4px, 1vw, 8px);
            --spacing-sm: clamp(8px, 1.5vw, 12px);
            --spacing-md: clamp(12px, 2vw, 16px);
            --spacing-lg: clamp(16px, 2.5vw, 20px);
            --spacing-xl: clamp(20px, 3vw, 24px);
            --spacing-xxl: clamp(24px, 4vw, 32px);
            
            /* Colors */
            --primary: #ff4500;
            --primary-light: #ff6b35;
            --primary-dark: #cc3700;
            --secondary: #28a745;
            --secondary-light: #34ce57;
            --dark: #1a1a1a;
            --light-dark: #333;
            --bg: #f8f9fa;
            --card-bg: #ffffff;
            --text: #333;
            --text-light: #666;
            --text-lighter: #999;
            --border: #e0e0e0;
            --shadow: 0 4px 12px rgba(0,0,0,0.08);
            --shadow-light: 0 2px 8px rgba(0,0,0,0.05);
            --radius: 12px;
            --radius-sm: 8px;
            --radius-lg: 16px;
            --transition: all 0.3s ease;
            
            /* Button sizes that scale */
            --btn-height: clamp(44px, 5vh, 56px);
            --btn-font-size: clamp(16px, 2vw, 18px);
            
            /* Card sizes */
            --card-min-height: clamp(140px, 15vh, 180px);
            --card-image-height: clamp(120px, 12vh, 150px);
            
            /* Input sizes */
            --input-height: clamp(44px, 5vh, 52px);
            --input-font-size: clamp(16px, 2vw, 18px);
        }
        
        /* Responsive font sizing */
        body {
            font-size: var(--base-font-size);
        }
        
        /* Adjust for different screen sizes */
        @media (max-width: 768px) {
            :root {
                --base-font-size: 16px;
            }
            body {
                font-size: calc(var(--base-font-size) * var(--phone-font-scale));
            }
        }
        
        @media (max-width: 480px) {
            :root {
                --base-font-size: 15px;
            }
            body {
                font-size: calc(var(--base-font-size) * var(--small-phone-font-scale));
            }
        }
        
        @media (min-width: 769px) and (max-width: 1024px) {
            body {
                font-size: calc(var(--base-font-size) * var(--tablet-font-scale));
            }
        }
        
        @media (min-width: 1025px) {
            :root {
                --base-font-size: 20px;
            }
            body {
                font-size: calc(var(--base-font-size) * var(--tablet-font-scale));
            }
        }
        
        /* Base Styles */
        body {
            font-family: 'Segoe UI', 'Inter', -apple-system, BlinkMacSystemFont, Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
            padding-bottom: calc(var(--btn-height) + var(--spacing-xl));
            -webkit-text-size-adjust: 100%;
            -moz-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            text-size-adjust: 100%;
        }
        
        /* Container with responsive max-width */
        .container {
            width: 100%;
            max-width: min(1200px, 95vw);
            margin: 0 auto;
            padding: 0 var(--spacing-md);
            box-sizing: border-box;
        }
        
        /* Header responsive styles */
        header {
            background: white;
            padding: var(--spacing-lg) var(--spacing-md);
            text-align: center;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow-light);
        }
        
        .header-title {
            font-size: clamp(1.5rem, 4vw, 2rem);
            margin: 0;
            color: var(--dark);
            font-weight: 700;
        }
        
        /* Navigation */
        .main-nav {
            display: flex;
            justify-content: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm) var(--spacing-md);
            background: white;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 99;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .nav-btn {
            background: none;
            border: none;
            padding: var(--spacing-sm) var(--spacing-lg);
            border-radius: 20px;
            font-size: clamp(0.8rem, 1.8vw, 0.9rem);
            cursor: pointer;
            color: var(--text-light);
            transition: var(--transition);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 5px;
            white-space: nowrap;
            flex-shrink: 0;
        }
        
        .nav-btn.active {
            background: var(--primary);
            color: white;
            box-shadow: var(--shadow-light);
        }
        
        /* Grid system */
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(min(280px, 100%), 1fr));
            gap: var(--spacing-md);
            margin: var(--spacing-lg) 0;
        }
        
        @media (max-width: 480px) {
            .menu-grid {
                grid-template-columns: 1fr;
                gap: var(--spacing-sm);
            }
        }
        
        /* Cards */
        .card {
            background: var(--card-bg);
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow-light);
            transition: var(--transition);
            border: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            min-height: var(--card-min-height);
        }
        
        .card img {
            width: 100%;
            height: var(--card-image-height);
            object-fit: cover;
            background: linear-gradient(45deg, #f5f5f5, #e0e0e0);
        }
        
        .card-info {
            padding: var(--spacing-md);
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        
        .card-title {
            font-size: clamp(0.9rem, 2vw, 1rem);
            font-weight: 600;
            margin: 0 0 var(--spacing-sm) 0;
            line-height: 1.4;
        }
        
        /* Buttons */
        .btn {
            background: linear-gradient(90deg, var(--primary), var(--primary-light));
            color: white;
            border: none;
            width: 100%;
            height: var(--btn-height);
            padding: 0 var(--spacing-lg);
            border-radius: var(--radius-sm);
            font-size: var(--btn-font-size);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-sm);
            text-decoration: none;
            box-sizing: border-box;
        }
        
        .btn:hover {
            background: linear-gradient(90deg, var(--primary-dark), var(--primary));
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 69, 0, 0.3);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        /* Floating Footer */
        .floating-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: white;
            padding: var(--spacing-md);
            box-shadow: 0 -5px 20px rgba(0,0,0,0.1);
            z-index: 1000;
            display: flex;
            gap: var(--spacing-md);
            box-sizing: border-box;
        }
        
        @media (max-width: 480px) {
            .floating-footer {
                flex-direction: column;
                gap: var(--spacing-sm);
            }
        }
        
        /* Inputs */
        input[type="text"],
        input[type="tel"],
        textarea,
        select {
            width: 100%;
            height: var(--input-height);
            padding: 0 var(--spacing-md);
            border: 1.5px solid var(--border);
            border-radius: var(--radius-sm);
            box-sizing: border-box;
            font-family: inherit;
            font-size: var(--input-font-size);
            transition: var(--transition);
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
            z-index: 10000;
            align-items: center;
            justify-content: center;
            padding: var(--spacing-md);
            box-sizing: border-box;
        }
        
        .modal-content {
            background: white;
            border-radius: var(--radius-lg);
            width: 100%;
            max-width: min(500px, 95vw);
            max-height: 90vh;
            overflow-y: auto;
            animation: modalSlide 0.3s ease;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
        }
        
        @keyframes modalSlide {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Location Modal */
        .location-modal {
            text-align: center;
            padding: var(--spacing-xl);
        }
        
        .location-icon {
            font-size: clamp(48px, 10vw, 64px);
            margin-bottom: var(--spacing-lg);
            color: var(--primary);
        }
        
        .location-title {
            font-size: clamp(1.2rem, 3vw, 1.5rem);
            margin: 0 0 var(--spacing-md) 0;
            color: var(--dark);
            font-weight: 700;
        }
        
        .location-message {
            font-size: clamp(0.9rem, 2vw, 1rem);
            color: var(--text-light);
            line-height: 1.6;
            margin: 0 0 var(--spacing-xl) 0;
        }
        
        .location-buttons {
            display: flex;
            gap: var(--spacing-md);
        }
        
        @media (max-width: 480px) {
            .location-buttons {
                flex-direction: column;
            }
        }
        
        /* Payment Modal */
        .payment-modal {
            padding: var(--spacing-xl);
        }
        
        .payment-options {
            display: grid;
            gap: var(--spacing-md);
            margin: var(--spacing-xl) 0;
        }
        
        .payment-option {
            background: white;
            border: 2px solid var(--border);
            border-radius: var(--radius);
            padding: var(--spacing-lg);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }
        
        .payment-option:hover {
            border-color: var(--primary-light);
            transform: translateY(-2px);
            box-shadow: var(--shadow-light);
        }
        
        .payment-option.selected {
            border-color: var(--primary);
            background: #ff450008;
        }
        
        .payment-icon {
            width: clamp(40px, 8vw, 48px);
            height: clamp(40px, 8vw, 48px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(1.2rem, 2.5vw, 1.5rem);
            flex-shrink: 0;
        }
        
        .payment-info {
            flex: 1;
        }
        
        .payment-title {
            font-size: clamp(1rem, 2vw, 1.1rem);
            font-weight: 600;
            margin: 0 0 var(--spacing-xs) 0;
            color: var(--dark);
        }
        
        .payment-desc {
            font-size: clamp(0.8rem, 1.8vw, 0.9rem);
            color: var(--text-light);
            margin: 0;
            line-height: 1.4;
        }
        
        /* Loading spinner */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Toast notification */
        .toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--dark);
            color: white;
            padding: var(--spacing-md) var(--spacing-xl);
            border-radius: var(--radius);
            z-index: 10001;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            animation: toastInOut 3s ease;
            display: none;
            font-weight: 500;
            text-align: center;
            max-width: 90%;
            box-sizing: border-box;
        }
        
        @keyframes toastInOut {
            0%, 100% { opacity: 0; transform: translateX(-50%) translateY(-20px); }
            10%, 90% { opacity: 1; transform: translateX(-50%) translateY(0); }
        }
        
        /* Restaurant titles */
        .restaurant-title {
            background: linear-gradient(90deg, var(--primary), var(--primary-light));
            color: white;
            padding: var(--spacing-md) var(--spacing-lg);
            border-radius: var(--radius-sm);
            margin: var(--spacing-xl) 0 var(--spacing-md) 0;
            font-size: clamp(1rem, 2.5vw, 1.2rem);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }
        
        /* Section headers */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: var(--spacing-xl) 0 var(--spacing-md) 0;
            padding-bottom: var(--spacing-sm);
            border-bottom: 2px solid var(--primary-light);
        }
        
        .section-title {
            font-size: clamp(1.1rem, 3vw, 1.3rem);
            font-weight: 700;
            color: var(--dark);
            margin: 0;
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }
        
        /* RTL support for Oromo */
        body[data-lang="om"] {
            direction: rtl;
            text-align: right;
        }
        
        body[data-lang="om"] .payment-option {
            flex-direction: row-reverse;
            text-align: right;
        }
        
        /* Prevent zoom on iOS */
        input, select, textarea {
            font-size: 16px !important;
        }
        
        /* Ensure tap targets are minimum 44px */
        button, 
        .btn, 
        input[type="checkbox"],
        .payment-option {
            min-height: 44px;
        }
        
        /* Hide scrollbar but keep functionality */
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
    </style>
</head>
<body>

<!-- Location Permission Modal (FIRST THING USER SEES) -->
<div id="locationModal" class="modal" style="display: block;">
    <div class="modal-content location-modal">
        <div class="location-icon">üìç</div>
        <div class="location-title" data-am="·ä†·ä´·â£·â¢·ãé·äï ·ã´·à≥·ãç·âÅ" data-om="Bakka keessan agarsiisaa">·ä†·ä´·â£·â¢·ãé·äï ·ã´·à≥·ãç·âÅ</div>
        <div class="location-message" data-am="·àà·çà·å£·äï ·àõ·ãµ·à®·àª ·ä•·äì ·âµ·ä≠·ä≠·àà·äõ ·ã®·àò·àã·ä™·ã´ ·ä≠·çç·ã´ ·àà·àõ·àµ·àã·âµ ·ã®·ä•·à≠·àµ·ãé·äï ·ä†·ä´·â£·â¢ ·àõ·ãà·âÖ ·ä†·àà·â•·äï·ç¢Location ·çà·âÉ·ãµ ·ã≠·àµ·å°·ç¢" data-om="Ariifachiifachuuf fi kaffaltii ergaa sirrii hiruuf bakka keessan beekuu barbaanna.<br><br>Mee hayyama bakkaa kenni.">
            ·àà·çà·å£·äï ·àõ·ãµ·à®·àª ·ä•·äì ·âµ·ä≠·ä≠·àà·äõ ·ã®·àò·àã·ä™·ã´ ·ä≠·çç·ã´ ·àà·àõ·àµ·àã·âµ ·ã®·ä•·à≠·àµ·ãé·äï ·ä†·ä´·â£·â¢ ·àõ·ãà·âÖ ·ä†·àà·â•·äï·ç¢<br><br>·ä•·â£·ä≠·ãé ·ã®·ä†·ä´·â£·â¢ ·çà·âÉ·ãµ ·ã≠·àµ·å°·ç¢
        </div>
        <div class="location-buttons">
            <button class="btn" onclick="requestLocationPermission()" id="allowLocationBtn">
                <span data-am="·ä†·à®·åã·åç·å•" data-om="Mirkaneessi">·ä†·à®·åã·åç·å•</span>
            </button>
            <button class="btn" style="background: var(--text-light);" onclick="denyLocation()" data-am="·ä†·àç·çà·àç·åç·àù" data-om="Hin barbaadu">
                ·ä†·àç·çà·àç·åç·àù
            </button>
        </div>
    </div>
</div>

<!-- Payment Method Modal (Shows after location is granted) -->
<div id="paymentModal" class="modal">
    <div class="modal-content payment-modal">
        <h2 style="margin: 0 0 var(--spacing-lg) 0; color: var(--primary); text-align: center;" data-am="·ã®·ä≠·çç·ã´ ·ãò·ã¥ ·ã≠·àù·à®·å°" data-om="Kaffaltii Mala Filadhu">
            ·ã®·ä≠·çç·ã´ ·ãò·ã¥ ·ã≠·àù·à®·å°
        </h2>
        
        <div class="payment-options">
            <div class="payment-option" onclick="selectPayment('cash')" id="cashOption">
                <div class="payment-icon" style="background: #28a74520; color: #28a745;">
                    <i class="fas fa-money-bill-wave"></i>
                </div>
                <div class="payment-info">
                    <div class="payment-title" data-am="·ä≠·çç·ã´ ·ä®·àò·àã·ä™·ã´ ·â†·äã·àã" data-om="Kaffaltii Ergaa Booda">
                        ·ä≠·çç·ã´ ·ä®·àò·àã·ä™·ã´ ·â†·äã·àã
                    </div>
                    <div class="payment-desc" data-am="·àù·åç·â°·äï ·ä®·â∞·âÄ·â†·àâ ·â†·äã·àã ·â†·åà·äï·ãò·â• ·ã≠·ä≠·çà·àâ" data-om="Nyaata fudhachuu keessan booda qarshii kaffala">
                        ·àù·åç·â°·äï ·ä®·â∞·âÄ·â†·àâ ·â†·äã·àã ·â†·åà·äï·ãò·â• ·ã≠·ä≠·çà·àâ
                    </div>
                </div>
                <i class="fas fa-check-circle" style="color: #28a745; font-size: 1.2rem; display: none;"></i>
            </div>
            
            <div class="payment-option" onclick="selectPayment('telegram')" id="telegramOption">
                <div class="payment-icon" style="background: #0088cc20; color: #0088cc;">
                    <i class="fab fa-telegram"></i>
                </div>
                <div class="payment-info">
                    <div class="payment-title" data-am="·â†·â¥·àå·åç·à´·àù" data-om="Telegiraamiin">
                        ·â†·â¥·àå·åç·à´·àù
                    </div>
                    <div class="payment-desc" data-am="·â†·â¥·àå·åç·à´·àù ·ã≠·ä≠·çà·àâ" data-om="Telegiraamiin kaffala">
                        ·â†·â¥·àå·åç·à´·àù ·ã≠·ä≠·çà·àâ
                    </div>
                </div>
                <i class="fas fa-check-circle" style="color: #0088cc; font-size: 1.2rem; display: none;"></i>
            </div>
        </div>
        
        <div style="margin: var(--spacing-xl) 0;">
            <button class="btn" onclick="confirmPayment()" id="confirmPaymentBtn" disabled>
                <span data-am="·ä†·à®·åã·åç·å•" data-om="Mirkaneessi">·ä†·à®·åã·åç·å•</span>
            </button>
        </div>
        
        <p style="text-align: center; font-size: 0.9rem; color: var(--text-light); margin: 0;" data-am="·âµ·ãï·ãõ·ãù·ãé·äï ·àà·àõ·à®·åã·åà·å• ·ä≠·çç·ã´ ·ãò·ã¥ ·àò·àù·à®·å• ·ä†·àà·â•·ãé·âµ·ç¢" data-om="Dhaadannoo mirkaneessuuf mala kaffaltii filachuu qabdu.">
            ·âµ·ãï·ãõ·ãù·ãé·äï ·àà·àõ·à®·åã·åà·å• ·ä≠·çç·ã´ ·ãò·ã¥ ·àò·àù·à®·å• ·ä†·àà·â•·ãé·âµ·ç¢
        </p>
    </div>
</div>

<!-- Toast Notification -->
<div class="toast" id="toast"></div>

<!-- Main App Content (Hidden until location granted) -->
<div id="appContent" style="display: none;">
    <!-- Language Switcher -->
    <div style="position: fixed; top: var(--spacing-md); right: var(--spacing-md); z-index: 101; background: white; padding: var(--spacing-sm); border-radius: var(--radius); box-shadow: var(--shadow-light);">
        <div style="display: flex; gap: var(--spacing-sm);">
            <button class="lang-btn" onclick="switchLanguage('am')" style="padding: var(--spacing-sm) var(--spacing-md); border: 1px solid var(--border); background: none; border-radius: var(--radius-sm); cursor: pointer; font-size: 0.9rem;">·ä†·àõ</button>
            <button class="lang-btn" onclick="switchLanguage('om')" style="padding: var(--spacing-sm) var(--spacing-md); border: 1px solid var(--border); background: none; border-radius: var(--radius-sm); cursor: pointer; font-size: 0.9rem;">Orom</button>
        </div>
    </div>

    <!-- Header -->
    <header>
        <h1 class="header-title" id="site-title" data-am="·â¢·àæ·çç·â± ·ã¥·àä·â®·à™" data-om="Bishooftu Ergaa">
            ·â¢·àæ·çç·â± ·ã¥·àä·â®·à™
        </h1>
        <div style="font-size: 0.9rem; color: var(--text-light); margin-top: var(--spacing-sm);" id="welcomeMessage" data-am="·ã∞·àÖ·äì ·àò·å°! ·àù·åç·â•·ãé·äï ·ã≠·àù·à®·å°" data-om="Baga nagaan dhuftan! Nyaata filadhu">
            ·ã∞·àÖ·äì ·àò·å°! ·àù·åç·â•·ãé·äï ·ã≠·àù·à®·å°
        </div>
    </header>

    <!-- Navigation -->
    <nav class="main-nav">
        <button class="nav-btn active" onclick="showPage('menu')" data-am="üçî ·àù·äì·àå" data-om="üçî Menu">üçî ·àù·äì·àå</button>
        <button class="nav-btn" onclick="showPage('cart')" data-am="üõí ·âÖ·à≠·å´·âµ" data-om="üõí Gaaddisa">üõí ·âÖ·à≠·å´·âµ</button>
        <button class="nav-btn" onclick="showPage('track')" data-am="üì¶ ·ã≠·ä®·â≥·â∞·àâ" data-om="üì¶ Hordofi">üì¶ ·ã≠·ä®·â≥·â∞·àâ</button>
        <button class="nav-btn" onclick="showPage('contact')" data-am="üìû ·ä†·åç·äô·äï" data-om="üìû Nu Qunnamuu">üìû ·ä†·åç·äô·äï</button>
    </nav>

    <!-- Main Content -->
    <div class="container">
        <!-- Menu Page -->
        <div id="menuPage" class="page active">
            <div class="section-header">
                <h2 class="section-title" data-am="üçΩÔ∏è ·àù·åç·â¶·âΩ" data-om="üçΩÔ∏è Nyaatota">üçΩÔ∏è ·àù·åç·â¶·âΩ</h2>
            </div>

            <!-- Etalem Hotel -->
            <div class="restaurant-title">
                <i class="fas fa-hotel"></i>
                <span data-am="·ä•·â≥·àà·àù ·ä¢·äï·â∞·à≠·äì·àΩ·äì·àç ·àÜ·â¥·àç" data-om="Etalem Interneeshinaal Hoteela">·ä•·â≥·àà·àù ·ä¢·äï·â∞·à≠·äì·àΩ·äì·àç ·àÜ·â¥·àç</span>
            </div>
            
            <div class="menu-grid">
                <!-- Burgers -->
                <div class="card" data-category="burger" data-restaurant="etalem">
                    <div style="position: relative;">
                        <img src="./assets/double-special-burger.webp" alt="Double Special Burger" onerror="this.src='data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><rect width=\"100\" height=\"100\" fill=\"%23f5f5f5\"/><text x=\"50\" y=\"50\" font-family=\"Arial\" font-size=\"14\" fill=\"%23666\" text-anchor=\"middle\" dy=\".3em\">üçî</text></svg>'">
                        <div style="position: absolute; top: 8px; left: 8px; background: var(--primary); color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: bold;">700 ·â•·à≠</div>
                    </div>
                    <div class="card-info">
                        <h3 class="card-title">Double Special Burger</h3>
                        <div style="margin-top: auto; display: flex; justify-content: space-between; align-items: center;">
                            <button class="add-to-cart-btn" onclick="addToCart('Double Special Burger', 700, 'etalem')" style="background: var(--primary); color: white; border: none; padding: var(--spacing-sm) var(--spacing-md); border-radius: var(--radius-sm); cursor: pointer; font-size: 0.9rem;">
                                <i class="fas fa-plus"></i>
                                <span data-am="·å®·àù·à≠" data-om="Dabaladhu">·å®·àù·à≠</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Add more Etalem items similarly -->
                
            </div>

            <!-- Kameti's Kitchen -->
            <div class="restaurant-title">
                <i class="fas fa-utensil-spoon"></i>
                <span data-am="·ä´·àú·â≤ ·ä™·âΩ·äï" data-om="Kameetii Kitchen">·ä´·àú·â≤ ·ä™·âΩ·äï</span>
            </div>
            
            <div class="menu-grid">
                <div class="card" data-category="burger" data-restaurant="kameti">
                    <div style="position: relative;">
                        <img src="./assets/kameti-special-burger.webp" alt="Kameti Special Burger" onerror="this.src='data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><rect width=\"100\" height=\"100\" fill=\"%23f5f5f5\"/><text x=\"50\" y=\"50\" font-family=\"Arial\" font-size=\"14\" fill=\"%23666\" text-anchor=\"middle\" dy=\".3em\">üçî</text></svg>'">
                        <div style="position: absolute; top: 8px; left: 8px; background: var(--primary); color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: bold;">500 ·â•·à≠</div>
                    </div>
                    <div class="card-info">
                        <h3 class="card-title">Kameti Special Burger</h3>
                        <div style="margin-top: auto; display: flex; justify-content: space-between; align-items: center;">
                            <button class="add-to-cart-btn" onclick="addToCart('Kameti Special Burger', 500, 'kameti')" style="background: var(--primary); color: white; border: none; padding: var(--spacing-sm) var(--spacing-md); border-radius: var(--radius-sm); cursor: pointer; font-size: 0.9rem;">
                                <i class="fas fa-plus"></i>
                                <span data-am="·å®·àù·à≠" data-om="Dabaladhu">·å®·àù·à≠</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Add more Kameti items similarly -->
                
            </div>

            <!-- Classic Noodles -->
            <div class="restaurant-title">
                <i class="fas fa-star"></i>
                <span data-am="·ä≠·àã·à≤·ä≠ ·äë·ãµ·àç·àµ" data-om="Classic Noodles">·ä≠·àã·à≤·ä≠ ·äë·ãµ·àç·àµ</span>
            </div>
            
            <div class="menu-grid">
                <div class="card" data-category="noodles" data-restaurant="noodles">
                    <div style="position: relative;">
                        <img src="./assets/stir-fry-chicken-noodles.webp" alt="Stir Fry Chicken Noodles" onerror="this.src='data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><rect width=\"100\" height=\"100\" fill=\"%23f5f5f5\"/><text x=\"50\" y=\"50\" font-family=\"Arial\" font-size=\"14\" fill=\"%23666\" text-anchor=\"middle\" dy=\".3em\">üçú</text></svg>'">
                        <div style="position: absolute; top: 8px; left: 8px; background: var(--primary); color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: bold;">650 ·â•·à≠</div>
                    </div>
                    <div class="card-info">
                        <h3 class="card-title">Stir Fry Chicken Noodles</h3>
                        <div style="margin-top: auto; display: flex; justify-content: space-between; align-items: center;">
                            <button class="add-to-cart-btn" onclick="addToCart('Stir Fry Chicken Noodles', 650, 'noodles')" style="background: var(--primary); color: white; border: none; padding: var(--spacing-sm) var(--spacing-md); border-radius: var(--radius-sm); cursor: pointer; font-size: 0.9rem;">
                                <i class="fas fa-plus"></i>
                                <span data-am="·å®·àù·à≠" data-om="Dabaladhu">·å®·àù·à≠</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Add more Noodle items similarly -->
                
            </div>
        </div>

        <!-- Cart Page -->
        <div id="cartPage" class="page" style="display: none;">
            <div class="section-header">
                <h2 class="section-title" data-am="üõí ·ã®·ä•·à≠·àµ·ãé ·âÖ·à≠·å´·âµ" data-om="üõí Gaaddisa Keessan">üõí ·ã®·ä•·à≠·àµ·ãé ·âÖ·à≠·å´·âµ</h2>
            </div>
            
            <div id="cartItems" style="min-height: 200px;">
                <!-- Cart items will be populated here -->
                <div style="text-align: center; padding: var(--spacing-xl); color: var(--text-light);" id="emptyCartMessage" data-am="·âÖ·à≠·å´·âµ·ãé ·â£·ã∂ ·äê·ãç" data-om="Gaaddisa keessan duwwaa dha">
                    ·âÖ·à≠·å´·âµ·ãé ·â£·ã∂ ·äê·ãç
                </div>
            </div>
            
            <div style="background: white; padding: var(--spacing-lg); border-radius: var(--radius); margin-top: var(--spacing-lg); box-shadow: var(--shadow-light);">
                <div style="display: flex; justify-content: space-between; margin-bottom: var(--spacing-md);">
                    <span data-am="·ã®·àù·åç·â• ·ãã·åã" data-om="Gatii Nyaataa">·ã®·àù·åç·â• ·ãã·åã:</span>
                    <span id="foodTotal">0 ·â•·à≠</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: var(--spacing-md);">
                    <span data-am="·ã®·àò·àã·ä™·ã´ ·ä≠·çç·ã´" data-om="Kaffaltii Ergaa">·ã®·àò·àã·ä™·ã´ ·ä≠·çç·ã´:</span>
                    <span id="deliveryFee">0 ·â•·à≠</span>
                </div>
                <div style="display: flex; justify-content: space-between; font-size: 1.2rem; font-weight: bold; padding-top: var(--spacing-md); border-top: 2px solid var(--border);">
                    <span data-am="·å†·âÖ·àã·àã" data-om="Walakkaa">·å†·âÖ·àã·àã:</span>
                    <span id="totalPrice">0 ·â•·à≠</span>
                </div>
            </div>
        </div>

        <!-- Track Page -->
        <div id="trackPage" class="page" style="display: none;">
            <div class="section-header">
                <h2 class="section-title" data-am="üì¶ ·âµ·ãï·ãõ·ãù ·çà·àç·åç" data-om="üì¶ Ordeer Barbaadi">üì¶ ·âµ·ãï·ãõ·ãù ·çà·àç·åç</h2>
            </div>
            
            <div style="background: white; padding: var(--spacing-xl); border-radius: var(--radius); box-shadow: var(--shadow-light);">
                <div style="margin-bottom: var(--spacing-lg);">
                    <label style="display: block; margin-bottom: var(--spacing-sm); font-weight: 600;" data-am="·ã®·âµ·ãï·ãõ·ãù ·àò·àà·ã´" data-om="ID Ordeeraa">·ã®·âµ·ãï·ãõ·ãù ·àò·àà·ã´</label>
                    <input type="text" id="orderIdInput" placeholder="BD12345678" style="width: 100%; padding: var(--spacing-md); border: 1px solid var(--border); border-radius: var(--radius-sm); font-size: 1rem;">
                </div>
                <button class="btn" onclick="trackOrder()">
                    <i class="fas fa-search"></i>
                    <span data-am="·âµ·ãï·ãõ·ãù ·çà·àç·åç" data-om="Ordeer Barbaadi">·âµ·ãï·ãõ·ãù ·çà·àç·åç</span>
                </button>
            </div>
            
            <div id="trackingResult" style="display: none; margin-top: var(--spacing-xl);">
                <!-- Tracking result will be shown here -->
            </div>
        </div>

        <!-- Contact Page -->
        <div id="contactPage" class="page" style="display: none;">
            <div class="section-header">
                <h2 class="section-title" data-am="üìû ·ä†·åç·äô·äï" data-om="üìû Nu Qunnamuu">üìû ·ä†·åç·äô·äï</h2>
            </div>
            
            <div style="background: white; padding: var(--spacing-xl); border-radius: var(--radius); box-shadow: var(--shadow-light);">
                <h3 style="margin-top: 0; color: var(--primary);" data-am="·â†·â¥·àå·åç·à´·àù ·ã´·åç·äô·äï" data-om="Telegiraamiin Nu Qunnamuu">·â†·â¥·àå·åç·à´·àù ·ã´·åç·äô·äï</h3>
                <p data-am="·àà·çà·å£·äï ·ãµ·åã·çç ·ä•·äì ·å•·ã´·âÑ·ãé·âΩ ·â†·â¥·àå·åç·à´·àù ·ã≠·å†·ã≠·âÅ·äï·ç¢" data-om="Gargaarsa ariifachiisaa fi gaaffilee Telegiraamiin nu gaafadhaa.">
                    ·àà·çà·å£·äï ·ãµ·åã·çç ·ä•·äì ·å•·ã´·âÑ·ãé·âΩ ·â†·â¥·àå·åç·à´·àù ·ã≠·å†·ã≠·âÅ·äï·ç¢
                </p>
                <button class="btn" onclick="openTelegramForSupport()" style="margin-top: var(--spacing-md); background: linear-gradient(90deg, #0088cc, #00a8ff);">
                    <i class="fab fa-telegram"></i>
                    <span data-am="·â¥·àå·åç·à´·àù ·ã≠·ä≠·çà·â±" data-om="Telegiraamii Bani">·â¥·àå·åç·à´·àù ·ã≠·ä≠·çà·â±</span>
                </button>
            </div>
            
            <div style="background: white; padding: var(--spacing-xl); border-radius: var(--radius); box-shadow: var(--shadow-light); margin-top: var(--spacing-lg);">
                <h3 style="margin-top: 0; color: var(--primary);" data-am="·àµ·àç·ä≠" data-om="Bilbila">·àµ·àç·ä≠</h3>
                <p>0962636940</p>
                <button class="btn" onclick="callSupport()" style="margin-top: var(--spacing-md);">
                    <i class="fas fa-phone"></i>
                    <span data-am="·ã≠·ã∞·ãç·àâ" data-om="Bilbilaa">·ã≠·ã∞·ãç·àâ</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Floating Checkout Button -->
    <div class="floating-footer" id="floatingFooter" style="display: none;">
        <button class="btn" onclick="openCheckout()" style="flex: 1;">
            <i class="fas fa-shopping-cart"></i>
            <span id="cartCount">0</span>
            <span data-am="·âµ·ãï·ãõ·ãù ·ä†·å†·äì·âÖ" data-om="Dhaadannoo Xumuri">·âµ·ãï·ãõ·ãù ·ä†·å†·äì·âÖ</span>
        </button>
    </div>
</div>

<script>
    // Configuration
    const config = {
        botUsername: "Bishoftu_Delivery_bot",
        telegramAdmin: "Bishoftu_Delivery_bot",
        
        // Restaurant coordinates
        restaurants: {
            etalem: { lat: 8.7592026, lng: 38.9458399 },
            kameti: { lat: 8.7596178, lng: 38.9450543 },
            noodles: { lat: 8.7512666, lng: 38.9619499 }
        },
        
        // Delivery fees
        deliveryFees: {
            within1km: 50,
            beyond1km: 99,
            firstOrderFree: true
        },
        
        // Default user location (Bishoftu center)
        defaultLocation: { lat: 8.756, lng: 38.952 }
    };

    // App State
    const state = {
        currentLanguage: localStorage.getItem('preferredLang') || 'am',
        userLocation: null,
        hasLocationPermission: false,
        selectedPayment: null,
        cart: JSON.parse(localStorage.getItem('cart')) || [],
        isFirstOrder: localStorage.getItem('firstOrderMade') !== 'true',
        currentPage: 'menu'
    };

    // Initialize app
    function initApp() {
        // Set initial language
        switchLanguage(state.currentLanguage);
        
        // Check if location was previously granted
        const savedLocation = localStorage.getItem('userLocation');
        if (savedLocation) {
            state.userLocation = JSON.parse(savedLocation);
            state.hasLocationPermission = true;
            showAppContent();
        }
        
        // Load cart
        updateCartUI();
        
        // Setup event listeners
        setupEventListeners();
    }

    // Request location permission
    function requestLocationPermission() {
        const btn = document.getElementById('allowLocationBtn');
        const originalText = btn.innerHTML;
        
        btn.innerHTML = '<div class="loading-spinner"></div>';
        btn.disabled = true;
        
        if (!navigator.geolocation) {
            showToast(state.currentLanguage === 'am' ? 
                '‚ùå ·ä†·ä´·â£·â¢ ·ä†·åà·àç·åç·àé·âµ ·ã®·àà·àù' : 
                '‚ùå Tajaajila bakkaa hin jiru');
            btn.innerHTML = originalText;
            btn.disabled = false;
            return;
        }
        
        const options = {
            enableHighAccuracy: true,
            timeout: 10000,
            maximumAge: 0
        };
        
        navigator.geolocation.getCurrentPosition(
            (position) => {
                state.userLocation = {
                    lat: position.coords.latitude,
                    lng: position.coords.longitude
                };
                state.hasLocationPermission = true;
                
                // Save location
                localStorage.setItem('userLocation', JSON.stringify(state.userLocation));
                
                // Show payment modal
                showPaymentModal();
                
                showToast(state.currentLanguage === 'am' ? 
                    '‚úÖ ·ä†·ä´·â£·â¢·ãé ·â∞·àò·ãù·åç·âß·àç!' : 
                    '‚úÖ Bakka keessan barreeffame!');
            },
            (error) => {
                let errorMsg = state.currentLanguage === 'am' ? 
                    '‚ùå ·ä†·ä´·â£·â¢ ·àõ·ãà·âÖ ·ä†·àç·â∞·âª·àà·àù' : 
                    '‚ùå Bakka beekuu hindandeenye';
                
                switch(error.code) {
                    case error.PERMISSION_DENIED:
                        errorMsg = state.currentLanguage === 'am' ? 
                            '‚ùå ·ä†·ä´·â£·â¢ ·çà·âÉ·ãµ ·ä†·àç·â∞·à∞·å†·àù' : 
                            '‚ùå Hayyama bakkaa hin kennine';
                        break;
                    case error.POSITION_UNAVAILABLE:
                        errorMsg = state.currentLanguage === 'am' ? 
                            '‚ùå ·ä†·ä´·â£·â¢ ·àò·à®·åÉ ·ã®·àà·àù' : 
                            '‚ùå Odeeffannoo bakkaa hin jiru';
                        break;
                    case error.TIMEOUT:
                        errorMsg = state.currentLanguage === 'am' ? 
                            '‚ùå ·ä†·ä´·â£·â¢ ·àò·å†·ã®·âÖ ·åä·ãú·ãç ·ä†·àç·çè·àç' : 
                            '‚ùå Yeroo gaafannoo bakkaa darbee';
                        break;
                }
                
                showToast(errorMsg);
                btn.innerHTML = originalText;
                btn.disabled = false;
            },
            options
        );
    }

    // Deny location
    function denyLocation() {
        showToast(state.currentLanguage === 'am' ? 
            'üëå ·ä•·à∫·ç£ ·ã≠·âÖ·à≠·â≥·ç¢ ·ä†·ä´·â£·â¢ ·à≥·ã≠·å†·ã®·âÖ ·àò·å†·âÄ·àù ·ä†·ã≠·âΩ·àâ·àù·ç¢' : 
            'üëå Dhiifama, ilaalcha bakkaa hin gaafatamne fayyadamuu hin dandeessu.');
        // Keep showing location modal until granted
    }

    // Show payment method modal
    function showPaymentModal() {
        document.getElementById('locationModal').style.display = 'none';
        document.getElementById('paymentModal').style.display = 'flex';
        
        // Reset payment selection
        state.selectedPayment = null;
        document.getElementById('confirmPaymentBtn').disabled = true;
        
        // Reset checkmarks
        document.querySelectorAll('.fa-check-circle').forEach(icon => {
            icon.style.display = 'none';
        });
    }

    // Select payment method
    function selectPayment(method) {
        state.selectedPayment = method;
        
        // Update UI
        document.querySelectorAll('.payment-option').forEach(option => {
            option.classList.remove('selected');
            option.querySelector('.fa-check-circle').style.display = 'none';
        });
        
        const selectedOption = document.getElementById(method + 'Option');
        selectedOption.classList.add('selected');
        selectedOption.querySelector('.fa-check-circle').style.display = 'block';
        
        document.getElementById('confirmPaymentBtn').disabled = false;
    }

    // Confirm payment method and show app
    function confirmPayment() {
        if (!state.selectedPayment) {
            showToast(state.currentLanguage === 'am' ? 
                '‚ö†Ô∏è ·ä•·â£·ä≠·ãé ·ã®·ä≠·çç·ã´ ·ãò·ã¥ ·ã≠·àù·à®·å°' : 
                '‚ö†Ô∏è Mala kaffaltii filadhu');
            return;
        }
        
        document.getElementById('paymentModal').style.display = 'none';
        showAppContent();
        
        // Save payment preference
        localStorage.setItem('selectedPayment', state.selectedPayment);
    }

    // Show main app content
    function showAppContent() {
        document.getElementById('appContent').style.display = 'block';
        updateCartUI();
    }

    // Switch language
    function switchLanguage(lang) {
        state.currentLanguage = lang;
        localStorage.setItem('preferredLang', lang);
        
        // Update HTML attributes
        document.documentElement.lang = lang;
        document.documentElement.setAttribute('data-lang', lang);
        
        // Update all translatable elements
        updateTextContent();
        
        // Update cart UI
        updateCartUI();
        
        showToast(lang === 'am' ? 
            '‚úÖ ·âã·äï·âã ·â∞·âÄ·ã≠·àØ·àç!' : 
            '‚úÖ Afaan jijjiirame!');
    }

    // Update text content based on language
    function updateTextContent() {
        document.querySelectorAll('[data-am]').forEach(el => {
            const text = state.currentLanguage === 'am' ? 
                el.getAttribute('data-am') : 
                el.getAttribute('data-om');
            if (text) el.textContent = text;
        });
        
        // Update page title
        const title = state.currentLanguage === 'am' ? 
            '·â¢·àæ·çç·â± ·ã¥·àä·â®·à™' : 
            'Bishooftu Ergaa';
        document.title = title;
        document.getElementById('page-title').textContent = title;
    }

    // Show page
    function showPage(page) {
        state.currentPage = page;
        
        // Hide all pages
        document.querySelectorAll('.page').forEach(p => {
            p.style.display = 'none';
        });
        
        // Show selected page
        document.getElementById(page + 'Page').style.display = 'block';
        
        // Update navigation buttons
        document.querySelectorAll('.nav-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        
        // Find and activate the correct button
        const activeBtn = Array.from(document.querySelectorAll('.nav-btn')).find(btn => 
            btn.getAttribute('onclick')?.includes(page)
        );
        if (activeBtn) activeBtn.classList.add('active');
        
        // Show/hide floating footer
        document.getElementById('floatingFooter').style.display = 
            (page === 'menu' || page === 'cart') && state.cart.length > 0 ? 'flex' : 'none';
        
        // Scroll to top
        window.scrollTo(0, 0);
    }

    // Add item to cart
    function addToCart(itemName, price, restaurant) {
        // Check if item already in cart
        const existingItem = state.cart.find(item => item.name === itemName);
        
        if (existingItem) {
            existingItem.quantity++;
        } else {
            state.cart.push({
                name: itemName,
                price: price,
                restaurant: restaurant,
                quantity: 1
            });
        }
        
        // Save to localStorage
        localStorage.setItem('cart', JSON.stringify(state.cart));
        
        // Update UI
        updateCartUI();
        
        // Show feedback
        const card = event.target.closest('.card');
        card.style.animation = 'none';
        setTimeout(() => {
            card.style.animation = 'itemAdded 0.3s ease';
        }, 10);
        
        showToast(state.currentLanguage === 'am' ? 
            `‚úÖ ${itemName} ·â∞·å®·àò·à®` : 
            `‚úÖ ${itemName} dabalame`);
    }

    // Update cart UI
    function updateCartUI() {
        const cartCount = state.cart.reduce((sum, item) => sum + item.quantity, 0);
        document.getElementById('cartCount').textContent = cartCount;
        
        // Show/hide floating footer
        document.getElementById('floatingFooter').style.display = 
            (state.currentPage === 'menu' || state.currentPage === 'cart') && cartCount > 0 ? 'flex' : 'none';
        
        // Update cart page
        updateCartPage();
    }

    // Update cart page
    function updateCartPage() {
        const cartItemsContainer = document.getElementById('cartItems');
        const emptyCartMessage = document.getElementById('emptyCartMessage');
        
        if (state.cart.length === 0) {
            cartItemsContainer.innerHTML = '';
            cartItemsContainer.appendChild(emptyCartMessage);
            document.getElementById('foodTotal').textContent = '0 ·â•·à≠';
            document.getElementById('deliveryFee').textContent = '0 ·â•·à≠';
            document.getElementById('totalPrice').textContent = '0 ·â•·à≠';
            return;
        }
        
        // Calculate totals
        const foodTotal = state.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        const deliveryFee = calculateDeliveryFee();
        const totalPrice = foodTotal + deliveryFee;
        
        // Update totals display
        document.getElementById('foodTotal').textContent = `${foodTotal} ·â•·à≠`;
        document.getElementById('deliveryFee').textContent = `${deliveryFee} ·â•·à≠`;
        document.getElementById('totalPrice').textContent = `${totalPrice} ·â•·à≠`;
        
        // Render cart items
        cartItemsContainer.innerHTML = '';
        
        state.cart.forEach((item, index) => {
            const itemDiv = document.createElement('div');
            itemDiv.className = 'cart-item';
            itemDiv.style.cssText = `
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: var(--spacing-md);
                background: white;
                border-radius: var(--radius);
                margin-bottom: var(--spacing-sm);
                box-shadow: var(--shadow-light);
            `;
            
            itemDiv.innerHTML = `
                <div>
                    <div style="font-weight: 600; margin-bottom: 4px;">${item.name}</div>
                    <div style="font-size: 0.9rem; color: var(--text-light);">${item.price} ·â•·à≠ x ${item.quantity}</div>
                </div>
                <div style="display: flex; align-items: center; gap: var(--spacing-md);">
                    <div style="font-weight: bold;">${item.price * item.quantity} ·â•·à≠</div>
                    <button onclick="removeFromCart(${index})" style="background: none; border: none; color: var(--primary); cursor: pointer; font-size: 1.2rem;">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            
            cartItemsContainer.appendChild(itemDiv);
        });
    }

    // Remove item from cart
    function removeFromCart(index) {
        state.cart.splice(index, 1);
        localStorage.setItem('cart', JSON.stringify(state.cart));
        updateCartUI();
        
        showToast(state.currentLanguage === 'am' ? 
            'üóëÔ∏è ·äï·å•·àç ·â∞·à∞·à≠·ãü·àç' : 
            'üóëÔ∏è Qooda dhiifame');
    }

    // Calculate delivery fee
    function calculateDeliveryFee() {
        if (!state.userLocation) return 0;
        
        // For now, use a simple calculation based on Etalem (main restaurant)
        // In a real app, you'd calculate based on the farthest restaurant in the order
        const distance = calculateDistance(
            state.userLocation.lat,
            state.userLocation.lng,
            config.restaurants.etalem.lat,
            config.restaurants.etalem.lng
        );
        
        let fee = distance <= 1 ? config.deliveryFees.within1km : config.deliveryFees.beyond1km;
        
        // First order free
        if (state.isFirstOrder && config.deliveryFees.firstOrderFree) {
            fee = 0;
        }
        
        return fee;
    }

    // Calculate distance between two coordinates
    function calculateDistance(lat1, lon1, lat2, lon2) {
        const R = 6371;
        const dLat = (lat2 - lat1) * Math.PI / 180;
        const dLon = (lon2 - lon1) * Math.PI / 180;
        const a = 
            Math.sin(dLat/2) * Math.sin(dLat/2) +
            Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * 
            Math.sin(dLon/2) * Math.sin(dLon/2);
        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
        return R * c;
    }

    // Open checkout
    function openCheckout() {
        if (state.cart.length === 0) {
            showToast(state.currentLanguage === 'am' ? 
                '‚ö†Ô∏è ·âÖ·à≠·å´·âµ·ãé ·â£·ã∂ ·äê·ãç' : 
                '‚ö†Ô∏è Gaaddisa keessan duwwaa dha');
            return;
        }
        
        // Calculate totals
        const foodTotal = state.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        const deliveryFee = calculateDeliveryFee();
        const totalPrice = foodTotal + deliveryFee;
        
        // Create order message
        const orderId = 'BD' + Date.now().toString().slice(-8);
        const orderMessage = createOrderMessage(orderId, foodTotal, deliveryFee, totalPrice);
        
        // Send to Telegram
        sendOrderToTelegram(orderMessage, orderId);
    }

    // Create order message
    function createOrderMessage(orderId, foodTotal, deliveryFee, totalPrice) {
        const itemsText = state.cart.map(item => 
            `‚Ä¢ ${item.name} - ${item.quantity} x ${item.price} ·â•·à≠ = ${item.price * item.quantity} ·â•·à≠`
        ).join('\n');
        
        const locationText = state.userLocation ? 
            `üìç Location: ${state.userLocation.lat.toFixed(6)}, ${state.userLocation.lng.toFixed(6)}` :
            'üìç Location: Not provided';
        
        const phoneRequest = state.currentLanguage === 'am' ? 
            'üì± ·ä•·â£·ä≠·ãé ·àµ·àç·ä≠ ·âÅ·å•·à≠·ãé·äï ·ã≠·àã·ä©:' :
            'üì± Mee lakkoofsa bilbilaa keessan ergaa:';
        
        return `/order\n\n` +
               `üÜî Order ID: ${orderId}\n` +
               `‚è∞ Time: ${new Date().toLocaleString()}\n\n` +
               `üõí Items:\n${itemsText}\n\n` +
               `üí∞ Food Total: ${foodTotal} ·â•·à≠\n` +
               `üöö Delivery Fee: ${deliveryFee} ·â•·à≠\n` +
               `üíµ TOTAL: ${totalPrice} ·â•·à≠\n\n` +
               `üí≥ Payment: ${state.selectedPayment === 'cash' ? 'Cash on Delivery' : 'Telegram'}\n` +
               `${locationText}\n\n` +
               `${phoneRequest}\n\n` +
               `üß™ This is a TEST order for user interest gathering`;
    }

    // Send order to Telegram
    function sendOrderToTelegram(message, orderId) {
        const encodedMessage = encodeURIComponent(message);
        const telegramUrl = `https://t.me/${config.botUsername}?text=${encodedMessage}`;
        
        // Open Telegram
        window.open(telegramUrl, '_blank');
        
        // Clear cart
        state.cart = [];
        localStorage.setItem('cart', JSON.stringify(state.cart));
        
        // Mark first order as completed
        if (state.isFirstOrder) {
            localStorage.setItem('firstOrderMade', 'true');
            state.isFirstOrder = false;
        }
        
        // Update UI
        updateCartUI();
        showPage('menu');
        
        // Show success message
        setTimeout(() => {
            alert(state.currentLanguage === 'am' ? 
                `‚úÖ ·âµ·ãï·ãõ·ãù·ãé ·â∞·àç·ä≥·àç!\n\n·ã®·âµ·ãï·ãõ·ãù ·àò·àà·ã´: ${orderId}\n\n·â¥·àå·åç·à´·àù ·ä®·â∞·ä®·çà·â∞ ·â†·äã·àã 'SEND' ·ã≠·å´·äë·ç¢` :
                `‚úÖ Dhaadannoo keessan ergame!\n\nID Ordeeraa: ${orderId}\n\nErgaa Telegiraamii bane booda 'SEND' cuqi.`);
        }, 500);
    }

    // Track order
    function trackOrder() {
        const orderId = document.getElementById('orderIdInput').value.trim();
        
        if (!orderId) {
            showToast(state.currentLanguage === 'am' ? 
                '‚ö†Ô∏è ·ä•·â£·ä≠·ãé ·ã®·âµ·ãï·ãõ·ãù ·àò·àà·ã´ ·ã´·àµ·åà·â°' : 
                '‚ö†Ô∏è ID ordeeraa galchaa');
            return;
        }
        
        // For demo, just show a message
        const resultDiv = document.getElementById('trackingResult');
        resultDiv.style.display = 'block';
        resultDiv.innerHTML = `
            <div style="background: white; padding: var(--spacing-xl); border-radius: var(--radius); box-shadow: var(--shadow-light);">
                <h3 style="margin-top: 0; color: var(--primary);">${state.currentLanguage === 'am' ? '·ã®·âµ·ãï·ãõ·ãù ·àÅ·äî·â≥' : 'Haala Ordeeraa'}</h3>
                <p>${state.currentLanguage === 'am' ? '·ã®·âµ·ãï·ãõ·ãù ·àò·àà·ã´:' : 'ID Ordeeraa:'} <strong>${orderId}</strong></p>
                <p>${state.currentLanguage === 'am' ? '·àÅ·äî·â≥:' : 'Haala:'} <span style="color: var(--primary); font-weight: bold;">${state.currentLanguage === 'am' ? '·â†·àõ·â•·à∞·àç ·àã·ã≠' : 'Kan oolan'}</span></p>
                <p>${state.currentLanguage === 'am' ? '·ã®·àö·ã∞·à≠·àµ·â†·âµ ·åä·ãú:' : 'Yeroon ga\'u:'} 30-45 ${state.currentLanguage === 'am' ? '·ã∞·âÇ·âÉ' : 'daqiiqaa'}</p>
                
                <div style="margin-top: var(--spacing-xl);">
                    <button class="btn" onclick="contactSupport()" style="margin-top: var(--spacing-md);">
                        <i class="fas fa-headset"></i>
                        <span>${state.currentLanguage === 'am' ? '·ãµ·åã·çç ·ã´·åç·äô' : 'Gargaarsa Argadhu'}</span>
                    </button>
                </div>
            </div>
        `;
        
        showToast(state.currentLanguage === 'am' ? 
            'üîç ·âµ·ãï·ãõ·ãù ·â∞·åà·äù·â∑·àç' : 
            'üîç Ordeer argame');
    }

    // Contact support via Telegram
    function contactSupport() {
        const message = state.currentLanguage === 'am' ?
            'üëã ·à∞·àã·àù! ·ä®·â¢·àæ·çç·â± ·ã¥·àä·â®·à™ ·ä•·åà·ãõ ·ä•·çà·àç·åã·àà·àÅ·ç¢' :
            'üëã Akkam! Bishooftu Ergaa irraa gargaarsa barbaada.';
        
        const encodedMessage = encodeURIComponent(message);
        const telegramUrl = `https://t.me/${config.telegramAdmin}?text=${encodedMessage}`;
        window.open(telegramUrl, '_blank');
    }

    // Open Telegram for support
    function openTelegramForSupport() {
        contactSupport();
    }

    // Call support
    function callSupport() {
        window.location.href = 'tel:+251962636940';
    }

    // Show toast notification
    function showToast(message, duration = 3000) {
        const toast = document.getElementById('toast');
        toast.textContent = message;
        toast.style.display = 'block';
        toast.style.animation = 'none';
        
        setTimeout(() => {
            toast.style.animation = 'toastInOut 3s ease';
        }, 10);
        
        setTimeout(() => {
            toast.style.display = 'none';
        }, duration);
    }

    // Setup event listeners
    function setupEventListeners() {
        // Handle orientation changes
        window.addEventListener('orientationchange', () => {
            setTimeout(() => {
                window.scrollTo(0, 0);
            }, 100);
        });
        
        // Handle resize for responsive adjustments
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                updateCartUI();
            }, 250);
        });
    }

    // Initialize when page loads
    window.addEventListener('DOMContentLoaded', initApp);
    
    // Prevent zoom on double-tap
    document.addEventListener('touchstart', (e) => {
        if (e.touches.length > 1) {
            e.preventDefault();
        }
    }, { passive: false });

    // Prevent pull-to-refresh
    document.addEventListener('touchmove', (e) => {
        if (e.scale !== 1) {
            e.preventDefault();
        }
    }, { passive: false });

    // Add CSS animation for item added effect
    const style = document.createElement('style');
    style.textContent = `
        @keyframes itemAdded {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .card {
            animation-duration: 0.3s;
            animation-timing-function: ease;
        }
        
        /* Ensure images are responsive */
        img {
            max-width: 100%;
            height: auto;
        }
        
        /* Improve tap targets on mobile */
        @media (max-width: 768px) {
            button, .btn, .payment-option {
                min-height: 44px;
            }
            
            .card {
                min-height: 44px;
            }
        }
    `;
    document.head.appendChild(style);
</script>
</body>
</html>
